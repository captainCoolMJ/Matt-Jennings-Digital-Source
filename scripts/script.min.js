/*! matt-jennings-digital 2016-06-11 */
!function(){"use strict";function a(a){return{left:Math.round(a.offset().left),top:Math.round(a.offset().top),right:Math.round(a.offset().left+a.outerWidth()),bottom:Math.round(a.offset().top+a.outerHeight())}}var b=new Date,c=b.getFullYear("yyyy"),d=document.getElementById("date");d.innerHTML=c;var e=function(){setTimeout(function(){$(".timeline-evt").addClass("active")},1e3)},f=function(a,b,c){a.hover(function(){b.addClass(c)},function(){b.removeClass(c)})},g=function(a){var b=function(a){var b=new Date(a),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=c[b.getMonth()],e=b.getFullYear(),f=Date.parse(b);return{ms:f,formatted:d+" "+e}},c=function(a){this.start=b(a.from),this.end=b("present"!==a.to.toLowerCase()?a.to:Date.now()),this.duration=this.end.ms-this.start.ms,this.evt=a.action,this.cat=a.category,this.details=a.details,this.$timelinePlot=$('<div class="timeline-evt">')};c.prototype.build=function(a,c){if(this.end.ms<c)return!1;var d=Date.now()-c,e=Math.round(this.duration/d*100),f=Math.round((this.start.ms-c)/d*100);b(Date.now()).ms===this.end.ms&&(this.end.formatted="Present");var g=$('<div class="time-evt-description">'),h=$('<h4 class="plot-title">').text(this.evt),i=$('<p class="plot-date">').text(this.start.formatted+" - "+this.end.formatted),j=$('<p class="plot-details">').text(this.details);return e=e>100?100:e,f=0>f?0:f,this.$timelinePlot.addClass("timeline-"+this.cat),g.append(h).append(i).append(j),this.addEventListeners(),this.$timelinePlot.append(g),this.$timelinePlot},c.prototype.addEventListeners=function(){this.$timelinePlot.hover(function(){$(this).toggleClass("hover")})};var d=function(){var b=[];a.forEach(function(a){var d=new c(a);b.push(d)}),b.sort(function(a,b){return b.start.ms-a.start.ms});var d=31556925974,e=Date.now()-8*d,f=b.filter(function(a){return"work"===a.cat}),g=b.filter(function(a){return"life"===a.cat}),h=$("#timeline-work"),i=$("#timeline-life");f.forEach(function(a,b){h.append(a.build(b,e))}),g.forEach(function(a,b){i.append(a.build(b,e))})};return{init:d()}};$("a[href*=#]:not([href=#])").click(function(a){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var b=$(this.hash);b=b.length?b:$("[name="+this.hash.slice(1)+"]"),b.length&&($("html,body").stop().animate({scrollTop:b.offset().top},350,"easeInOutQuart"),a.preventDefault())}}),$(document).ready(function(){$.getJSON("data/site.json",function(a){g(a.timeline)}),f($(".title, .logo"),$(".logo"),"hover"),f($("header, .main_nav"),$("header"),"hover"),e(),$("#toggleMenu").on("click",function(){return $("body").addClass("menu-active"),$("body").one("click",function(){$("body").removeClass("menu-active")}),!1});var b;$(".timelines").length&&(b=a($(".timelines")))})}($);